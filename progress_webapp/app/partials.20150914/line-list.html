<div class="panel panel-default">
<div class="row">
<div class="col-md-12">
    <div class="row">
    <div class="col-md-6"> <h3 >Cell line list</h3> </div>
    <div class="col-md-6">
      <p><a href="#/errors">View categories of errors</a></p>
      <p><a href="#/history">View history of errors</a></p>
      <p><a href="#/tests">View summary of tests</a></p>
    </div>
    </div>

    <div class="wrapper">
      <p>Number of cell lines: <span ng-bind='LineCtrl.data.count'></span></p>
      <p>Date of data exports: <span ng-bind='LineCtrl.data.date'></span></p>
    </div>

    <table class="table table-responsive">
    <thead><tr>
    <th></th>
    <th ng-click="LineCtrl.sortBy('name')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Name</div></th>
    <th ng-click="LineCtrl.sortBy('alternateNames')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Alternative names</div></th>
    <th ng-click="LineCtrl.sortBy('IMSExported')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Exported by IMS API</div></th>
    <th ng-click="LineCtrl.sortBy('hESCregExported')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Exported by hPSCreg API</div></th>
    <th ng-click="LineCtrl.sortBy('hESCregValidated')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Validated by hPSCreg</div></th>
    <th ng-click="LineCtrl.sortBy('biosampleExported')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Exported by BioSample API</div></th>
    <th ng-click="LineCtrl.sortBy('IMSOther')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Other IMS errors</div></th>
    <th ng-click="LineCtrl.sortBy('hESCregOther')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Other hPSCreg errors</div></th>
    <th ng-click="LineCtrl.sortBy('biosampleOther')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">Other Biosample errors</div></th>
    <th ng-click="LineCtrl.sortBy('LIMS')"><div class="sort-arrows"><span class="glyphicon glyphicon-sort" aria-hidden="true"></span></div><div class="after-sort-arrows">&#34;LIMS&#34; errors</div></th>
    </tr></thead>
    <tbody> <tr ng-repeat="line in LineCtrl.data.lines">
      <td><span ng-bind="$index+1"></span></td>
      <td ng-class="{danger: line.consensus.name.error}"><a ng-if="line.consensus.name.val || line.consensus.biosample_id.val" ng-href="#/{{line.consensus.name.val || line.consensus.biosample_id.val}}"><span ng-bind="line.consensus.name.val || '{ unknown }'"></a></span></td>
      <td><span ng-bind="line.consensus.alternate_names"></span></td>
      <td ng-class="{danger: line.IMS.exported.error, success: !line.IMS.exported.error}"><span ng-bind="line.IMS.exported.error ? 'no' : 'yes'"></span></td>
      <td ng-class="{danger: line.hESCreg.exported.error, success: !line.hESCreg.exported.error}"><span ng-bind="line.hESCreg.exported.error ? 'no' : 'yes'"></span></td>
      <td ng-class="{danger: line.hESCreg.validated.error && !line.hESCreg.exported.error, success: !line.hESCreg.validated.error}"><span ng-bind="line.hESCreg.validated.error ? (!line.hESCreg.exported.error ? 'no' : '{cannot test yet}') : 'yes'"></span></td>
      <td ng-class="{danger: line.biosample.exported.error && !hESCreg.exported.error, success: !line.biosample.exported.error && !hESCreg.exported.error}"><span ng-bind="line.biosample.exported.error ? 'no' : 'yes'"></span></td>
      <td ng-class="{danger: !line.IMS.exported.error && (line.IMS.biosample_id.error || line.IMS.donor_biosample_id.error || line.IMS.name.error)}"><span ng-bind="line.IMS.exported.error ? '{cannot test yet}' : (line.IMS.biosample_id.error || line.IMS.donor_biosample_id.error || line.IMS.name.error) ? 'yes' : 'no' "></span></td>
      <td ng-class="{danger: !line.hESCreg.exported.error && (line.hESCreg.biosample_id.error || line.hESCreg.donor_biosample_id.error || line.hESCreg.name.error)}"><span ng-bind="line.hESCreg.exported.error ? '{cannot test yet}' : (line.hESCreg.biosample_id.error || line.hESCreg.donor_biosample_id.error || line.hESCreg.name.error) ? 'yes' : 'no' "></span></td>
      <td ng-class="{danger: !line.biosample.exported.error && (line.biosample.batch_donor_link.error || line.biosample.batch_line_link.error || line.biosample.id.error || line.donor_biosample.exported.error)}"><span ng-bind="line.biosample.exported.error ? '{cannot test yet}' : (line.biosample.batch_donor_link.error || line.biosample.batch_line_link.error || line.biosample.id.error || line.donor_biosample.exported.error) ? 'yes' : 'no' "></span></td>
      <td ng-class="{danger: line.LIMS.missing_data.error || line.LIMS.name_batch_id_consistent.error, success: line.LIMS.batches.length && !line.LIMS.missing_data.error && !line.LIMS.name_batch_id_consistent.error}"><span ng-bind="line.LIMS.batches.length == 0 ? '{cannot test yet}' : line.LIMS.missing_data.error ? 'yes' : line.LIMS.name_batch_id_consistent.error ? 'yes' : 'no'"></span></td>
    </tr></tbody>
    </table>
</div>
</div>
</div>
